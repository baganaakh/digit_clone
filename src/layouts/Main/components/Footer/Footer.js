import React, {useEffect} from 'react'
import Grid from '@material-ui/core/Grid'
import Box from '@material-ui/core/Box'
import Typography from '@material-ui/core/Typography'
import ListItem from '@material-ui/core/ListItem'
import ListItemText from '@material-ui/core/ListItemText'
import {Link as RouterLink} from 'react-router-dom'
import {FaExpeditedssl, FaLifeRing, FaRegCheckCircle} from 'react-icons/fa'
import axios from 'axios'

function buildUrl(url) {
  if (url.length > 0 && url.startsWith('/')) {
    url = url.substr(1)
  }
  const result = `https://api.digit.mn/${url}`
  return result
}

async function getContentInternal(url) {
  try {
    const response = await axios.get(
      buildUrl(url)
    )
    if (response) {
    }
    return await response.data
  } catch (error) {
    throw new Error(`Failed to retrieve content, got ${error}`)
  }
}

const Footer = ({setThemePalette}) => {
  let menuData={}
  let res
  useEffect(() => {
    getData()
  }, [])
  const getData = async () => {
    menuData['footerTypes'] = await getContentInternal('footertypes?_sort=Sequence:asc')
    menuData['footerMenus'] = await getContentInternal('footermenus?_sort=Sequence:asc');
  }
  setThemePalette('orange')

  function changeOverColor(e) {
    e.target.style.color = '#015ab4'
  }

  function changePrimaryColor(e) {
    e.target.style.color = '#fff'
  }

  return (
    <Grid container spacing={0} margin={0}>
      <Grid item xs={12}>
        <Grid item xs={12}>
          <Box
            display={'flex'}
            justifyContent={'space-between'}
            alignItems={'center'}
            width={'100%'}
            flexDirection={{xs: 'column', sm: 'row'}}
            bgcolor={'#02152c'}
            padding={5}
            paddingLeft={'15%'}
            color="#fff"
          >
            <Box display="flex" alignItems="center" fontWeight="700"><FaRegCheckCircle
              style={{fontSize: '40px'}}/>&nbsp;&nbsp;Итгэмжит байгууллага</Box>
            <Box display="flex" alignItems="center" fontWeight="700"><FaLifeRing
              style={{fontSize: '40px'}}/>&nbsp;&nbsp;Таны бизнесийг бид дэмжинэ</Box>
            <Box display="flex" alignItems="center" fontWeight="700"><FaExpeditedssl
              style={{fontSize: '40px'}}/>&nbsp;&nbsp;Найдвартай хамт олон</Box>
            <Box></Box>
          </Box>
          <Box
            display={'flex'}
            justifyContent={'center'}
            alignItems={'center'}
            width={'100%'}
            bgcolor={'#02152c'}
          >
            {/* <Box
            component={Avatar}
            variant="rounded"
            width={100}
            height={100}
            borderRadius={15}
            //src={item.profilePhoto ? assetAPIURL + item.profilePhoto.url : "" }
            border={6}
            display={'flex'}
            title="Digit"
            bgcolor='transparent'
            padding={1}
          >         */}
            <svg
              width={160.703}
              height={90.232}
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 166.703 96.232"
              stroke="currentColor"
            >
              <g id="Group_9" data-name="Group 9" transform="translate(1496.362 -844)">
                <g id="Group_8" data-name="Group 8" transform="translate(-1495.862 844)">
                  <g id="Group_7" data-name="Group 7" transform="translate(0)">
                    <path id="Exclusion_1" data-name="Exclusion 1"
                          d="M73.849,62.339a1.041,1.041,0,0,1-.9-.548l-2.97-4.564a1.546,1.546,0,0,1-.234-1.2,1.635,1.635,0,0,1,.406-.7,3.633,3.633,0,0,1,.842-.64,3.986,3.986,0,0,0,.651-.326,6.449,6.449,0,0,0,.833-.58,4.361,4.361,0,0,0,.724-.761,1.652,1.652,0,0,0,.326-1.014,1.508,1.508,0,0,0-.471-1.159,3.347,3.347,0,0,0-1.268-.688,9.279,9.279,0,0,0-1.811-.362,19.814,19.814,0,0,0-2.1-.109c-.77,0-1.671.037-2.68.109s-2.086.158-3.187.254-2.213.206-3.3.326-2.069.254-2.934.4a6.543,6.543,0,0,1-.757.048,2.809,2.809,0,0,1-1.127-.193,2.731,2.731,0,0,1-1.087-.869,4.142,4.142,0,0,1-.724-1.34,12.753,12.753,0,0,1-.471-1.775,17.009,17.009,0,0,1-.252-1.848c-.048-.6-.072-1.149-.072-1.63a5.691,5.691,0,0,1,.326-1.775,9.084,9.084,0,0,1,.942-1.956,11.459,11.459,0,0,1,1.413-1.811,8.789,8.789,0,0,1,1.739-1.413c.24-.1.326-.242.254-.435a1.412,1.412,0,0,0-.326-.507,12.052,12.052,0,0,1-1.616-1.906A11.452,11.452,0,0,1,52.865,31.2a12.473,12.473,0,0,1-.693-2.431,15.245,15.245,0,0,1-.231-2.694,11.6,11.6,0,0,1,.29-2.6,11.23,11.23,0,0,1,.869-2.436,13.478,13.478,0,0,1,1.349-2.191,13.019,13.019,0,0,1,1.73-1.865,14.284,14.284,0,0,1,2.064-1.522A15.309,15.309,0,0,1,60.6,14.306a14.168,14.168,0,0,1,2.562-.734,14.729,14.729,0,0,1,2.689-.245,16.621,16.621,0,0,1,4.419.58,15.435,15.435,0,0,1,3.984,1.739,1.63,1.63,0,0,0,.811.232,1.437,1.437,0,0,0,.2-.015,2.319,2.319,0,0,0,.869-.29,14.707,14.707,0,0,1,1.956-1.041,11.9,11.9,0,0,1,1.955-.66,2.552,2.552,0,0,1,.585-.062,3.867,3.867,0,0,1,1.356.257A4.092,4.092,0,0,1,83.432,15a4.968,4.968,0,0,1,1.147,1.847,8.8,8.8,0,0,1,.468,3,1.5,1.5,0,0,1-.181.8c-.12.192-.4.29-.833.29-.384,0-.835-.024-1.34-.073s-.882-.073-1.123-.073H81.1a2.255,2.255,0,0,0-.543.073,1.368,1.368,0,0,0-.8.362.867.867,0,0,0-.145.869,12.828,12.828,0,0,1,.543,2.01,11.066,11.066,0,0,1,.181,1.974,11.961,11.961,0,0,1-.281,2.6,11.463,11.463,0,0,1-.842,2.436,12.792,12.792,0,0,1-3.079,4.093,14.128,14.128,0,0,1-2.127,1.558,15.944,15.944,0,0,1-2.472,1.2,15.061,15.061,0,0,1-2.744.761,16.812,16.812,0,0,1-2.943.254c-.191,0-.447-.012-.761-.036s-.666-.061-1.051-.109a4.516,4.516,0,0,1-.905-.145.138.138,0,0,0-.052-.009c-.134,0-.373.149-.709.444a5.29,5.29,0,0,0-.651.761c-.145.217-.316.449-.507.688-.167.286-.216.492-.147.612.051.088.166.133.342.133a1.6,1.6,0,0,0,.239-.021c.964-.1,1.951-.182,2.934-.254s2.021-.109,3.079-.109a29.445,29.445,0,0,1,5.832.58,19.977,19.977,0,0,1,2.706.743,16.317,16.317,0,0,1,2.4,1.069,10.556,10.556,0,0,1,2.016,1.431A9.784,9.784,0,0,1,82.18,46.58a7.776,7.776,0,0,1,1.009,2.228,9.844,9.844,0,0,1,.336,2.626,8.207,8.207,0,0,1-.163,1.63,8.111,8.111,0,0,1-.486,1.557,12.138,12.138,0,0,1-1.69,2.825A14.705,14.705,0,0,1,78.815,59.8a14.375,14.375,0,0,1-2.7,1.7c-.526.241-1.107.484-1.726.724A1.517,1.517,0,0,1,73.849,62.339ZM66.14,22.093a5.5,5.5,0,0,0-1.92.323,4.615,4.615,0,0,0-1.557.97,4.371,4.371,0,0,0-1.032,1.437,4.5,4.5,0,0,0,0,3.45,4.37,4.37,0,0,0,1.032,1.437,4.615,4.615,0,0,0,1.557.97A5.5,5.5,0,0,0,66.14,31a4.986,4.986,0,0,0,1.811-.323,4.708,4.708,0,0,0,1.521-.97A4.37,4.37,0,0,0,70.5,28.273a4.5,4.5,0,0,0,0-3.45,4.371,4.371,0,0,0-1.032-1.437,4.708,4.708,0,0,0-1.521-.97,4.987,4.987,0,0,0-1.811-.323Zm49.405,24.848a20.441,20.441,0,0,1-2.978-.2,11.364,11.364,0,0,1-2.379-.6,9.6,9.6,0,0,1-1.861-.942,7.064,7.064,0,0,1-1.423-1.232,7.73,7.73,0,0,1-1.021-1.485,8.015,8.015,0,0,1-.657-1.7,15.176,15.176,0,0,1-.474-3.839V22.673a.848.848,0,0,0-.236-.652,1.014,1.014,0,0,0-.706-.217h-2.537a1.439,1.439,0,0,1-1.087-.38,1.606,1.606,0,0,1-.362-1.141V14.5l.005,0c2.319-2.167,7.748-7.242,10.868-9.955,1.8-.028,2.252-.042,2.444-.049.092,0,.126,0,.219,0a1.231,1.231,0,0,1,1.094.435,1.783,1.783,0,0,1,.292,1.014v6.809a2.1,2.1,0,0,0,.181.8.62.62,0,0,0,.389.326,2.436,2.436,0,0,0,.806.109h4.926a1.328,1.328,0,0,1,1.032.38,1.661,1.661,0,0,1,.344,1.141v4.781a1.661,1.661,0,0,1-.344,1.141,1.326,1.326,0,0,1-1.032.38h-5.36a.988.988,0,0,0-.761.217.88.88,0,0,0-.181.579V35.422a4.076,4.076,0,0,0,.163,1.232,1.765,1.765,0,0,0,.488.8,2.111,2.111,0,0,0,.833.435,4.4,4.4,0,0,0,1.2.145c.1,0,.28-.012.543-.036s.555-.048.869-.073.6-.048.869-.072.471-.036.616-.036a9.149,9.149,0,0,1,1.032-.072,2.127,2.127,0,0,1,.634.072.8.8,0,0,1,.4.435,4.572,4.572,0,0,1,.326,1.014l.869,4.636a3.072,3.072,0,0,1,.063,1.141,1,1,0,0,1-.389.67,3.634,3.634,0,0,1-1.2.58,20.1,20.1,0,0,1-3.151.507c-1.13.1-2.263.145-3.368.145Zm-19.994-.435H88.814a1.679,1.679,0,0,1-1.2-.38,1.514,1.514,0,0,1-.4-1.141V15.5a1.409,1.409,0,0,1,1.594-1.594h6.737a1.834,1.834,0,0,1,1.159.4,1.433,1.433,0,0,1,.507,1.2V44.985a1.477,1.477,0,0,1-.417,1.141A1.8,1.8,0,0,1,95.551,46.506Zm-49.55,0H39.264a1.679,1.679,0,0,1-1.2-.38,1.514,1.514,0,0,1-.4-1.141V15.5a1.409,1.409,0,0,1,1.594-1.594H46a1.833,1.833,0,0,1,1.159.4,1.432,1.432,0,0,1,.507,1.2V44.985a1.477,1.477,0,0,1-.417,1.141A1.8,1.8,0,0,1,46,46.506Zm-27.456,0H1.811a1.9,1.9,0,0,1-1.358-.435A1.734,1.734,0,0,1,0,44.768V3.476a1.735,1.735,0,0,1,.453-1.3,1.9,1.9,0,0,1,1.358-.435h16.3a23.309,23.309,0,0,1,3.378.231,15.762,15.762,0,0,1,2.889.693,11.376,11.376,0,0,1,2.4,1.155,9.456,9.456,0,0,1,1.911,1.616,11.756,11.756,0,0,1,1.458,2.01,12.84,12.84,0,0,1,1.041,2.336,15.678,15.678,0,0,1,.625,2.662,20.59,20.59,0,0,1,.208,2.988V32.887a19.866,19.866,0,0,1-.2,2.852,16.444,16.444,0,0,1-.6,2.617,12.109,12.109,0,0,1-1.014,2.327,10.973,10.973,0,0,1-1.449,1.983,10.586,10.586,0,0,1-1.884,1.612,12.429,12.429,0,0,1-2.318,1.214,13.549,13.549,0,0,1-2.771.761A19.6,19.6,0,0,1,18.545,46.506ZM11.229,10.272a1.778,1.778,0,0,0-1.776,1.776v24.08L7.854,41.5a.143.143,0,0,0,.021.129A.155.155,0,0,0,8,41.692a.143.143,0,0,0,.106-.047l3.775-3.989h4.383a5.483,5.483,0,0,0,5.477-5.477V15.749a5.483,5.483,0,0,0-5.477-5.477Zm80.99.592a6.018,6.018,0,0,1-2.209-.4,5.67,5.67,0,0,1-1.847-1.2,5.432,5.432,0,0,1-1.25-1.757A5.2,5.2,0,0,1,86.5,5.432,5.356,5.356,0,0,1,86.913,3.3a5.212,5.212,0,0,1,1.25-1.748A5.686,5.686,0,0,1,90.01.388,6.142,6.142,0,0,1,92.219,0a5.775,5.775,0,0,1,2.155.4,5.724,5.724,0,0,1,1.829,1.2,5.431,5.431,0,0,1,1.25,1.757,5.2,5.2,0,0,1,.417,2.083A4.721,4.721,0,0,1,97.4,7.5a6.345,6.345,0,0,1-1.231,1.738,5.633,5.633,0,0,1-1.775,1.2,5.481,5.481,0,0,1-2.174.435Zm-49.55,0a6.018,6.018,0,0,1-2.209-.4,5.671,5.671,0,0,1-1.847-1.2,5.432,5.432,0,0,1-1.25-1.757,5.2,5.2,0,0,1-.417-2.083A5.356,5.356,0,0,1,37.362,3.3a5.213,5.213,0,0,1,1.25-1.748A5.687,5.687,0,0,1,40.459.387,6.143,6.143,0,0,1,42.668,0a5.775,5.775,0,0,1,2.155.4,5.724,5.724,0,0,1,1.829,1.2A5.43,5.43,0,0,1,47.9,3.349a5.2,5.2,0,0,1,.417,2.083A4.721,4.721,0,0,1,47.848,7.5a6.345,6.345,0,0,1-1.231,1.739,5.636,5.636,0,0,1-1.775,1.2,5.482,5.482,0,0,1-2.173.435Z"
                          transform="translate(0 33.393)" fill="#fff" stroke="rgba(0,0,0,0)" stroke-miterlimit="10"
                          stroke-width="1"/>
                    <path id="Rectangle_4" data-name="Rectangle 4"
                          d="M21.315,0h0a20.87,20.87,0,0,1,20.87,20.87h0A21.315,21.315,0,0,1,20.87,42.185H0V21.315A21.315,21.315,0,0,1,21.315,0Z"
                          transform="translate(124.018)" fill="#f80"/>
                    <ellipse id="Ellipse_26" data-name="Ellipse 26" cx="2.738" cy="2.59" rx="2.738" ry="2.59"
                             transform="translate(132.455 18.65)" fill="#fff"/>
                    <ellipse id="Ellipse_27" data-name="Ellipse 27" cx="2.812" cy="2.59" rx="2.812" ry="2.59"
                             transform="translate(142.669 18.65)" fill="#fff"/>
                    <ellipse id="Ellipse_28" data-name="Ellipse 28" cx="2.516" cy="2.59" rx="2.516" ry="2.59"
                             transform="translate(153.03 18.65)" fill="#fff"/>
                  </g>
                </g>
              </g>
            </svg>
            <br/>
            {/* </Box> */}
          </Box>
        </Grid>
        <Box
          display={'flex'}
          justifyContent={'space-between'}
          alignItems={'center'}
          width={'100%'}
          flexDirection={{xs: 'column', sm: 'row'}}
          bgcolor={'#02152c'}
          padding={5}
          paddingLeft={'12%'}
        >
          {menuData && menuData['footerTypes'] && menuData['footerTypes'].map((item, i) => (
            <Grid bgcolor={'f8f9fc'} item xs={12} sm={6} md={3} key={i}>
              <Box
                component={Typography}
                variant={'h16'}
                gutterBottom
              >
                <Typography color="white" variant="subtitle2" component="span">
                  {item.name}
                </Typography>
              </Box>
              <br/>
              <br/>
              {menuData && menuData['footerMenus'] && menuData['footerMenus'].filter(k => k.footertype && k.footertype.id ? k.footertype.id === item.id : []).map((feature, j) => (
                <Box
                  component={ListItem}
                  variant={'body2'}
                  disableGutters
                  width={'100'}
                  padding={0}
                  key={j}
                  color={'white'}
                  //data-aos={'fade-up'}
                >
                  <ListItemText>
                    <Typography
                      component={RouterLink}
                      variant={'caption'}
                      color="white"
                      style={{textDecoration: 'none'}}
                      onMouseOver={changeOverColor}
                      onMouseLeave={changePrimaryColor}
                      to={feature.link || '/#'}
                    >
                      {feature.menu}
                    </Typography>
                  </ListItemText>
                </Box>
              ))}
            </Grid>
          ))}
        </Box>
        <Box
          display={'flex'}
          justifyContent={'space-between'}
          alignItems={'center'}
          width={'100%'}
        >
          <Grid item xs={12}>
            <Typography
              align={'center'}
              variant={'subtitle2'}
              color="#272D4E"
              gutterBottom
            >
              <br/>
              &copy; COPYRIGHT DIGIT 2021 - <a href="" underline="none"><span style={{color: '#272D4E'}}>TERMS & CONDITIONS PRIVACY POLICY</span></a>
            </Typography>
          </Grid>
        </Box>
      </Grid>
    </Grid>
  )
}

export default Footer
